/*
 * @blinkmobile/angular-signature-pad: v1.0.0-alpha.1 | https://github.com/blinkmobile/angular-signature-pad#readme
 * (c) 2017 BlinkMobile | Released under the MIT license
 */
!function(a,b){if("function"==typeof define&&define.amd)define(["module","angular","signature_pad"],b);else if("undefined"!=typeof exports)b(module,require("angular"),require("signature_pad"));else{var c={exports:{}};b(c,a.angular,a.SignaturePad),a.angularSignaturePad=c.exports}}(this,function(a,b,c){"use strict";function d(a,d,e,f,g){if(!c)return void g.error("SignaturePad is required");var h=this,i=d[0],j=i.children[0],k=void 0;j.width=i.clientWidth,j.height=i.clientHeight,h.$onDestroy=function(){k&&b.isFunction(k.off)&&k.off()},h.$onInit=function(){var d=h.options||{},f=function(){var a;if(k&&!k.isEmpty()){k.crop=h.crop&&h.crop();var b=[h.imageType?h.imageType():void 0,h.imageEncoder?h.imageEncoder():void 0];return(a=k).toDataURL.apply(a,b)}},g=function(c){if(b.isFunction(c))return function(){return a.$apply(function(){return c()})}};d.onBegin=g(d.onBegin);var l=d.onEnd;d.onEnd=g(function(){h.ngModel.$setViewValue(f()),b.isFunction(l)&&l()}),k=new c(j,d),h.resize&&h.resize({$fn:function(){k.resize(i.clientWidth,i.clientHeight,h.scaleDown&&h.scaleDown()),h.ngModel.$setViewValue(f())}}),h.ngModel.$isEmpty=function(){return k.isEmpty()},h.ngModel.$render=function(){if(h.ngModel.$viewValue){var a=new Image;k._reset(),a.src=h.ngModel.$viewValue,a.onload=function(){k.drawImage(a)},k._isEmpty=!1}else k.clear()},e.ngDisabled&&e.$observe("disabled",function(a){return a?k.off():k.on()})}}d.$inject=["$scope","$element","$attrs","$window","$log"];var e={template:'<canvas class="signature-pad">Your browser does not support the HTML5 canvas tag.</canvas>',controller:d,require:{ngModel:"ngModel"},bindings:{options:"<?",crop:"&?",imageType:"&?",imageEncoder:"&?",scaleDown:"&?",resize:"&?"}};a.exports=b.module("bmSignaturePad",[]).component("bmSignaturePad",e)});