/*
 * @blinkmobile/angular-signature-pad: v1.0.0-alpha.1 | https://github.com/blinkmobile/angular-signature-pad#readme
 * (c) 2017 BlinkMobile | Released under the MIT license
 */
!function(a,b){if("function"==typeof define&&define.amd)define(["module","angular","signature_pad"],b);else if("undefined"!=typeof exports)b(module,require("angular"),require("signature_pad"));else{var c={exports:{}};b(c,a.angular,a.SignaturePad),a.angularSignaturePad=c.exports}}(this,function(a,b,c){"use strict";function d(a,d,e,f){if(!c)return void f.error("SignaturePad is required");var g=this,h=d[0],i=h.children[0],j=void 0;i.width=h.clientWidth,i.height=h.clientHeight,g.$onDestroy=function(){j&&b.isFunction(j.off)&&j.off()},g.$onInit=function(){var d=g.options||{},e=function(){var a;if(j&&!j.isEmpty()){j.crop=g.crop&&g.crop();var b=[g.imageType?g.imageType():void 0,g.imageEncoder?g.imageEncoder():void 0];return(a=j).toDataURL.apply(a,b)}},f=function(c){if(b.isFunction(c))return function(){return a.$apply(function(){return c()})}};d.onBegin=f(d.onBegin);var k=d.onEnd;d.onEnd=f(function(){g.ngModel.$setViewValue(e()),b.isFunction(k)&&k()}),j=new c(i,d),g.resize&&g.resize({$fn:function(){j.resize(h.clientWidth,h.clientHeight,g.scaleDown&&g.scaleDown()),g.ngModel.$setViewValue(e())}}),g.ngModel.$isEmpty=function(){return j.isEmpty()},g.ngModel.$render=function(){if(g.ngModel.$viewValue){var a=new Image;j._reset(),a.src=g.ngModel.$viewValue,a.onload=function(){j.drawImage(a)},j._isEmpty=!1}else j.clear()}}}d.$inject=["$scope","$element","$window","$log"];var e={template:'<canvas class="signature-pad">Your browser does not support the HTML5 canvas tag.</canvas>',controller:d,require:{ngModel:"ngModel"},bindings:{options:"<?",crop:"&?",imageType:"&?",imageEncoder:"&?",scaleDown:"&?",resize:"&?"}};a.exports=b.module("bmSignaturePad",[]).component("bmSignaturePad",e)});