/*
 * @blinkmobile/angular-signature-pad: v1.0.0 | https://github.com/blinkmobile/angular-signature-pad#readme
 * (c) 2017 BlinkMobile | Released under the MIT license
 */
!function(e,n){if("function"==typeof define&&define.amd)define(["module","angular","signature_pad","@blinkmobile/canvas-manipulation"],n);else if("undefined"!=typeof exports)n(module,require("angular"),require("signature_pad"),require("@blinkmobile/canvas-manipulation"));else{var i={exports:{}};n(i,e.angular,e.SignaturePad,e.canvasManipulation),e.angularSignaturePad=i.exports}}(this,function(e,n,i,t){"use strict";function a(e,a,o,r,u){if(i){var s=this,l=a[0],d=l.children[0],c=void 0;d.width=l.attributes.width?l.attributes.width.value:l.clientWidth,d.height=l.attributes.height?l.attributes.height.value:l.clientHeight,s.$onDestroy=function(){c&&n.isFunction(c.off)&&c.off()},s.$onInit=function(){var a=s.options||{},r=function(){if(c&&!c.isEmpty()){var e=[s.imageType?s.imageType():void 0,s.imageEncoder?s.imageEncoder():void 0];if(s.crop&&s.crop())return t.toDataURLCropped.apply(t,[d].concat(e));var n;return(n=c).toDataURL.apply(n,e)}},u=function(i){if(n.isFunction(i))return function(){return e.$apply(function(){return i()})}};a.onBegin=u(a.onBegin);var g=a.onEnd;a.onEnd=u(function(){s.ngModel.$setViewValue(r()),n.isFunction(g)&&g()}),c=new i(d,a),s.resize&&s.resize({$fn:function(){var e=l.clientWidth,n=l.clientHeight;if(s.ngModel.$isEmpty())d.width=e,d.height=n;else{t.resize(d,e,n,s.scaleDown&&s.scaleDown())||c.clear(),s.ngModel.$setViewValue(r())}}}),s.ngModel.$isEmpty=function(){return c.isEmpty()},s.ngModel.$render=function(){if(s.ngModel.$viewValue){var e=new Image;c._reset(),e.src=s.ngModel.$viewValue,e.onload=function(){t.drawImageCentered(d,e)},c._isEmpty=!1}else c.clear()},o.ngDisabled&&o.$observe("disabled",function(e){return e?c.off():c.on()})}}else u.error("SignaturePad is required")}a.$inject=["$scope","$element","$attrs","$window","$log"];var o={template:'<canvas class="signature-pad">Your browser does not support the HTML5 canvas tag.</canvas>',controller:a,require:{ngModel:"ngModel"},bindings:{options:"<?",crop:"&?",imageType:"&?",imageEncoder:"&?",scaleDown:"&?",resize:"&?"}};e.exports=n.module("bmSignaturePad",[]).component("bmSignaturePad",o)});