/*
 * @blinkmobile/angular-signature-pad: v1.0.0 | https://github.com/blinkmobile/angular-signature-pad#readme
 * (c) 2017 BlinkMobile | Released under the MIT license
 */
!function(a,b){if("function"==typeof define&&define.amd)define(["module","angular","signature_pad","@blinkmobile/canvas-manipulation"],b);else if("undefined"!=typeof exports)b(module,require("angular"),require("signature_pad"),require("@blinkmobile/canvas-manipulation"));else{var c={exports:{}};b(c,a.angular,a.SignaturePad,a.canvasManipulation),a.angularSignaturePad=c.exports}}(this,function(a,b,c,d){"use strict";function e(a,e,f,g,h){if(!c)return void h.error("SignaturePad is required");var i=this,j=e[0],k=j.children[0],l=void 0;k.width=j.clientWidth,k.height=j.clientHeight,i.$onDestroy=function(){l&&b.isFunction(l.off)&&l.off()},i.$onInit=function(){var e=i.options||{},g=function(){if(l&&!l.isEmpty()){var a=[i.imageType?i.imageType():void 0,i.imageEncoder?i.imageEncoder():void 0];if(i.crop&&i.crop())return d.toDataURLCropped.apply(d,[k].concat(a));var b;return(b=l).toDataURL.apply(b,a)}},h=function(c){if(b.isFunction(c))return function(){return a.$apply(function(){return c()})}};e.onBegin=h(e.onBegin);var m=e.onEnd;e.onEnd=h(function(){i.ngModel.$setViewValue(g()),b.isFunction(m)&&m()}),l=new c(k,e),i.resize&&i.resize({$fn:function(){var a=j.clientWidth,b=j.clientHeight;if(i.ngModel.$isEmpty())k.width=a,k.height=b;else{var c=d.resize(k,a,b,i.scaleDown&&i.scaleDown());c||l.clear(),i.ngModel.$setViewValue(g())}}}),i.ngModel.$isEmpty=function(){return l.isEmpty()},i.ngModel.$render=function(){if(i.ngModel.$viewValue){var a=new Image;l._reset(),a.src=i.ngModel.$viewValue,a.onload=function(){d.drawImageCentered(k,a)},l._isEmpty=!1}else l.clear()},f.ngDisabled&&f.$observe("disabled",function(a){return a?l.off():l.on()})}}e.$inject=["$scope","$element","$attrs","$window","$log"];var f={template:'<canvas class="signature-pad">Your browser does not support the HTML5 canvas tag.</canvas>',controller:e,require:{ngModel:"ngModel"},bindings:{options:"<?",crop:"&?",imageType:"&?",imageEncoder:"&?",scaleDown:"&?",resize:"&?"}};a.exports=b.module("bmSignaturePad",[]).component("bmSignaturePad",f)});